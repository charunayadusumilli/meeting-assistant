{"version":3,"file":"electron-offline-net.js","sources":["../../src/src/main/transports/electron-offline-net.ts"],"sourcesContent":["import { BaseTransportOptions, makeOfflineTransport, OfflineTransportOptions, Transport } from '@sentry/core';\nimport { ElectronNetTransportOptions, makeElectronTransport } from './electron-net.js';\nimport { createOfflineStore, OfflineStoreOptions } from './offline-store.js';\n\nexport type ElectronOfflineTransportOptions = ElectronNetTransportOptions &\n  OfflineTransportOptions &\n  Partial<OfflineStoreOptions>;\n\n/**\n * Creates a Transport that uses Electrons net module to send events to Sentry. When they fail to send they are\n * persisted to disk and sent later\n */\nexport function makeElectronOfflineTransport<T extends BaseTransportOptions>(\n  baseTransport: (opt: T & ElectronOfflineTransportOptions) => Transport = makeElectronTransport,\n): (options: T & ElectronOfflineTransportOptions) => Transport {\n  return (userOptions: T & ElectronOfflineTransportOptions): Transport => {\n    // `makeElectronOfflineTransport` is a combination of two transports.\n    //\n    // The base Electron transport (`makeElectronTransport`) is wrapped by `makeOfflineTransport` which stores events to\n    // disk when they fail to send.\n    return makeOfflineTransport(baseTransport)({\n      flushAtStartup: true,\n      createStore: createOfflineStore,\n      ...userOptions,\n    });\n  };\n}\n"],"names":["makeElectronTransport","makeOfflineTransport","createOfflineStore"],"mappings":";;;;AAQA;;;AAGG;AACG,SAAU,4BAA4B,CAC1C,aAAA,GAAyEA,iCAAqB,EAAA;IAE9F,OAAO,CAAC,WAAgD,KAAe;;;;;AAKrE,QAAA,OAAOC,yBAAoB,CAAC,aAAa,CAAC,CAAC;AACzC,YAAA,cAAc,EAAE,IAAI;AACpB,YAAA,WAAW,EAAEC,+BAAkB;AAC/B,YAAA,GAAG,WAAW;AACf,SAAA,CAAC;AACJ,IAAA,CAAC;AACH;;;;"}