{"version":3,"file":"transport.js","sources":["../src/src/renderer/transport.ts"],"sourcesContent":["import {\n  BaseTransportOptions,\n  createTransport,\n  Transport,\n  TransportMakeRequestResponse,\n  TransportRequest,\n} from '@sentry/core';\nimport { IPCInterface } from '../common/ipc.js';\nimport { getIPC } from './ipc.js';\n\n/**\n * Creates a Transport that passes envelopes to the Electron main process.\n */\nexport function makeRendererTransport(options: BaseTransportOptions): Transport {\n  let ipc: IPCInterface | undefined;\n\n  return createTransport(options, async (request: TransportRequest): Promise<TransportMakeRequestResponse> => {\n    // We delay getting the IPC interface until until there is a client where we can pull the IPC namespace from.\n    if (!ipc) {\n      ipc = getIPC();\n    }\n\n    ipc.sendEnvelope(request.body);\n    // Since the main process handles sending of envelopes and rate limiting, we always return 200 OK to the renderers.\n    return { statusCode: 200 };\n  });\n}\n"],"names":["ipc","createTransport","getIPC"],"mappings":";;;AAUA;;AAEG;AACG,SAAU,qBAAqB,CAAC,OAA6B,EAAA;AACjE,IAAA,IAAIA,KAA6B;IAEjC,OAAOC,oBAAe,CAAC,OAAO,EAAE,OAAO,OAAyB,KAA2C;;QAEzG,IAAI,CAACD,KAAG,EAAE;YACRA,KAAG,GAAGE,UAAM,EAAE;AACf,QAAA;AAED,QAAAF,KAAG,CAAC,YAAY,CAAC,OAAO,CAAC,IAAI,CAAC;;AAE9B,QAAA,OAAO,EAAE,UAAU,EAAE,GAAG,EAAE;AAC5B,IAAA,CAAC,CAAC;AACJ;;;;"}